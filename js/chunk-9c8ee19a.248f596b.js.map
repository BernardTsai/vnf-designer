{"version":3,"sources":["webpack:///./src/components/monitoring/index.vue?06ac","webpack:///src/components/monitoring/index.vue","webpack:///./src/components/monitoring/index.vue?8f1f","webpack:///./src/components/monitoring/index.vue","webpack:///./src/components/monitoring/index.vue?b330"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","on","refresh","_v","_s","model","vnf","version","tenant","name","view","now","_m","_l","network","index","key","component","staticRenderFns","props","components","monitoring_network","monitoring_component","methods","self","request","XMLHttpRequest","refreshCB","indicator","document","querySelector","style","display","readyState","detail","setTimeout","status","element","inventory","jsyaml","safeLoad","responseText","elements","querySelectorAll","color","networks","server","servers","port","ports","window","location","hostname","onreadystatechange","params","auth","url","username","password","open","send","computed","result","max","push","i","String","$nextTick"],"mappings":"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","file":"js/chunk-9c8ee19a.248f596b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"monitoring\"}},[_c('div',{staticClass:\"vnf\",on:{\"click\":_vm.refresh}},[_vm._v(\"VNF: \"+_vm._s(_vm.model.vnf))]),_c('div',{staticClass:\"version\"},[_vm._v(\"Version: \"+_vm._s(_vm.model.version))]),_c('div',{staticClass:\"tenant\"},[_vm._v(\"Tenant: \"+_vm._s(_vm.model.tenant.name))]),_c('div',{staticClass:\"date\"},[_vm._v(\"Timestamp: \"+_vm._s(_vm.view.now))]),_vm._m(0),_vm._l((_vm.model.networks),function(network,index){return _c('monitoring_network',{key:'network-' + index,attrs:{\"model\":_vm.model,\"view\":_vm.view,\"network\":network,\"index\":index}})}),_vm._l((_vm.components),function(component,index){return _c('monitoring_component',{key:'component-' + component.index,attrs:{\"model\":_vm.model,\"view\":_vm.view,\"component\":component,\"name\":component.name,\"index\":index}})})],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"indicator\"},[_c('i',{staticClass:\"fas fa-heartbeat\"})])}]\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"monitoring\">\n      <div class=\"vnf\" @click=\"refresh\">VNF: {{model.vnf}}</div>\n      <div class=\"version\">Version: {{model.version}}</div>\n      <div class=\"tenant\">Tenant: {{model.tenant.name}}</div>\n      <div class=\"date\">Timestamp: {{view.now}}</div>\n      <div class=\"indicator\"><i class=\"fas fa-heartbeat\"/></div>\n      <monitoring_network\n        v-for=\"(network, index) in model.networks\"\n        :key=\"'network-' + index\"\n        :model=\"model\"\n        :view=\"view\"\n        :network=\"network\"\n        :index=\"index\"></monitoring_network>\n      <monitoring_component\n        v-for=\"(component, index) in components\"\n        :key=\"'component-' + component.index\"\n        :model=\"model\"\n        :view=\"view\"\n        :component=\"component\"\n        :name=\"component.name\"\n        :index=\"index\"></monitoring_component>\n    </div>\n</template>\n<script>\nexport default {\n    props:    ['model','view'],\n    components: {\n      monitoring_network: () => import('./MonitoringNetwork'),\n      monitoring_component: () => import('./MonitoringComponent')\n    },\n    methods: {\n      refresh: function() {\n        var self    = this\n        var request = new XMLHttpRequest();\n\n        // callback function to process the results\n        let refreshCB = () => {\n          // hide loading indicator\n          let indicator = document.querySelector(\"#monitoring .indicator\")\n          indicator.style.display = \"none\"\n\n          if (this.readyState == 4) {\n            // update in 10 seconds\n            if (this.view.detail == \"Monitoring\") {\n              setTimeout(function(){self.refresh()}, 10000)\n            }\n\n            // check status\n            if (this.status != 200) {\n              return\n            }\n\n            inventory = jsyaml.safeLoad(request.responseText)\n\n            // reset all networks, components and ports\n            elements = document.querySelectorAll(\".monitoring_network\")\n            for (var element of elements) {\n              element.querySelector(\".icon\").style.color = null\n              element.querySelector(\"input\").style.color = null\n            }\n\n            elements = document.querySelectorAll(\".monitoring_component\")\n            for (var element of elements) {\n              element.querySelector(\".icon\").style.color = null\n              element.querySelector(\".name\").style.color = null\n            }\n\n            elements = document.querySelectorAll(\".monitoring_port\")\n            for (var element of elements) {\n              element.style.color = null\n            }\n\n            // update network status\n            for (var network of inventory.networks) {\n              element = document.querySelector(\"#monitoring_network_\" + network.name)\n              if (element) {\n                if (network.status == \"ACTIVE\") {\n                  element.querySelector(\".icon\").style.color = \"green\"\n                  element.querySelector(\"input\").style.color = \"green\"\n                } else {\n                  element.querySelector(\".icon\").style.color = \"red\"\n                  element.querySelector(\"input\").style.color = \"red\"\n                }\n              }\n            }\n            // update server status\n            for (var server of inventory.servers) {\n              element = document.querySelector(\"#monitoring_component_\" + server.name)\n              if (element) {\n                if (server.status == \"ACTIVE\") {\n                  element.querySelector(\".icon\").style.color = \"green\"\n                  element.querySelector(\".name\").style.color = \"green\"\n                } else {\n                  element.querySelector(\".icon\").style.color = \"red\"\n                  element.querySelector(\".name\").style.color = \"red\"\n                }\n              }\n            }\n            // update port status\n            for (var port of inventory.ports) {\n              element = document.querySelector(\"#monitoring_port_\" + port.name)\n              if (element) {\n                element.style.color = (port.status == \"ACTIVE\" ? \"green\" : \"red\")\n              }\n            }\n          }\n        }\n\n        // check if the webpage has been loaded from file\n        if (window.location.hostname == \"\") {\n          return\n        }\n\n        // issue request to server backend\n        request.onreadystatechange = refreshCB()\n\n        var params  = \"tenant=\"   + this.model.tenant.name          + \"&\" +\n                      \"url=\"      + this.model.tenant.auth.url      + \"&\" +\n                      \"username=\" + this.model.tenant.auth.username + \"&\" +\n                      \"password=\" + this.model.tenant.auth.password\n\n        request.open('GET', '/inventory', true);  // asynchronous request\n        request.send(params);\n\n        // switch indicator\n        let indicator = document.querySelector(\"#monitoring .indicator\")\n        indicator.style.display = \"unset\"\n      }\n    },\n    computed: {\n      components: function() {\n        var result = []\n        var index  = 0\n\n        for (var index in this.model.components) {\n          let component = this.model.components[index]\n\n          if (component.max == 1) {\n            result.push({index: index, name: component.name, component: component })\n            index++\n          } else {\n            for (var i=0; i<=component.max; i++) {\n              result.push({index: index, name: component.name + \"-\" + String(i), component: component })\n              index++\n            }\n          }\n        }\n\n        // get status on next tick\n        this.$nextTick(this.refresh)\n\n        return result\n      }\n    }\n}\n</script>\n<style>\n#monitoring {\n  position: absolute;\n  left:     0px;\n  right:    0px;\n  top:      0px;\n  bottom:   0px;\n  padding:  0px;\n\n  overflow-y: scroll;\n}\n\n/*----------------------------------------------------------------------------*/\n\n#monitoring .vnf {\n  position:      absolute;\n  left:          8px;\n  top:           8px;\n  height:        18px;\n  width:         200px;\n  line-height:   18px;\n  text-overflow: ellipsis;\n  overflow-y:    hidden;\n  font-size:     16px;\n  font-weight:   bolder;\n  white-space:   nowrap;\n}\n\n#monitoring .tenant {\n  position:      absolute;\n  left:          8px;\n  top:           26px;\n  height:        14px;\n  width:         200px;\n  line-height:   14px;\n  text-overflow: ellipsis;\n  overflow-y:    hidden;\n  font-size:     12px;\n  white-space:   nowrap;\n}\n\n#monitoring .version {\n  position:      absolute;\n  left:          8px;\n  top:           40px;\n  height:        12px;\n  width:         200px;\n  line-height:   14px;\n  text-overflow: ellipsis;\n  overflow-y:    hidden;\n  font-size:     10px;\n  white-space:   nowrap;\n}\n\n#monitoring .date {\n  position:      absolute;\n  left:          8px;\n  top:           52px;\n  height:        12px;\n  width:         200px;\n  line-height:   14px;\n  text-overflow: ellipsis;\n  overflow-y:    hidden;\n  font-size:     10px;\n  white-space:   nowrap;\n}\n\n#monitoring .indicator {\n  position:         absolute;\n  right:            16px;\n  top:              16px;\n  font-size:        10px;\n  padding:          8px;\n  border-radius:    16px;\n  white-space:      nowrap;\n  background-color: orange;\n  vertical-align:   middle;\n  text-align:       center;\n  display:          none;\n  animation: pulse 2s infinite;\n}\n\n@keyframes pulse {\n    0% { background-color: orange;  color: black; }\n   50% { background-color: #FF4136; color: white; }\n  100% { background-color: orange;  color: black; }\n}\n\n/*----------------------------------------------------------------------------*/\n\n#monitoring .network {\n  position:         absolute;\n  border-left:      1px solid #808080;\n}\n\n#monitoring .network.dummy {\n  opacity: 0;\n}\n\n#monitoring .network.dummy:hover {\n  opacity: 0.2;\n}\n\n#monitoring .network.network0  {border-left-color: #8080ff}\n#monitoring .network.network1  {border-left-color: #80ff80}\n#monitoring .network.network2  {border-left-color: #ff8080}\n#monitoring .network.network3  {border-left-color: #C0C000}\n#monitoring .network.network4  {border-left-color: #ff80ff}\n#monitoring .network.network5  {border-left-color: #80ffff}\n#monitoring .network.network6  {border-left-color: #c080ff}\n#monitoring .network.network7  {border-left-color: #ffc080}\n#monitoring .network.network8  {border-left-color: #80ffc0}\n#monitoring .network.network9  {border-left-color: #80c0ff}\n#monitoring .network.network10 {border-left-color: #ff80c0}\n#monitoring .network.network11 {border-left-color: #c0ff80}\n\n#monitoring .network input, #monitoring .network .label {\n  position:         absolute;\n  left:             -20px;\n  top:              -16px;\n  width:            40px;\n  background-color: transparent;\n  border:           none;\n  line-height:      12px;\n  text-align:       center;\n  overflow:         hidden;\n  text-overflow:    ellipsis;\n  white-space:      nowrap;\n}\n\n#monitoring .network .icon {\n  position:         absolute;\n  left:             -20px;\n  top:              -32px;\n  width:            40px;\n  background-color: transparent;\n  border:           none;\n  line-height:      12px;\n  text-align:       center;\n  overflow:         hidden;\n  text-overflow:    ellipsis;\n  white-space:      nowrap;\n}\n\n\n/*----------------------------------------------------------------------------*/\n\n#monitoring .port {\n  position:         absolute;\n  vertical-align:   middle;\n  text-align:       center;\n  left:             -20px;\n  width:            40px;\n}\n\n/*----------------------------------------------------------------------------*/\n\n#monitoring .component {\n  position:                  absolute;\n  border-top-left-radius:    16px;\n  border-bottom-left-radius: 16px;\n}\n\n#monitoring .component .zone {\n  position:                  absolute;\n  left:                      0px;\n  top:                       0px;\n  width:                     32px;\n  height:                    32px;\n  line-height:               32px;\n  border-top-left-radius:    16px;\n  border-bottom-left-radius: 16px;\n  vertical-align:            middle;\n  text-align:                center;\n}\n\n#monitoring .component .zone input {\n  position:         absolute;\n  left:             0px;\n  right:            0px;\n  width:            32px;\n  height:           32px;\n  line-height:      32px;\n  background-color: transparent;\n  border:           none;\n  vertical-align:   middle;\n  text-align:       center;\n  text-align-last:  center;\n  color:            black;\n}\n\n#monitoring .component .zone:hover {\n  background-color: orange;\n  color:            blue;\n}\n\n#monitoring .component.dummy {\n  opacity: 0;\n}\n\n#monitoring .component.dummy:hover {\n  opacity: 0.2;\n}\n\n#monitoring .component .zone-O { background-color: #AAA }\n#monitoring .component .zone-E { background-color: #0C0 }\n#monitoring .component .zone-I { background-color: #88F }\n#monitoring .component .zone-M { background-color: #F44 }\n#monitoring .component .zone-R { background-color: #D0D }\n\n#monitoring .component .name {\n  position:         absolute;\n  left:             32px;\n  right:            16px;\n  top:              0px;\n  height:           18px;\n  text-overflow:    ellipsis;\n  overflow:         hidden;\n  white-space:      nowrap;\n  line-height:      18px;\n  padding-left:     4px;\n  padding-right:    4px;\n  text-align:       right;\n}\n\n#monitoring .component .name input {\n  background-color: inherit;\n  border: none;\n  font-size:        14px;\n  width:            160px;\n  text-overflow:    ellipsis;\n}\n\n#monitoring .component.dummy .name {\n  font-size:        14px;\n}\n\n#monitoring .component .icon {\n  position:         absolute;\n  right:            2px;\n  top:              0px;\n  height:          16px;\n  line-height:     16px;\n  font-size:       14px;\n  vertical-align:    middle;\n}\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=df3ad336&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}